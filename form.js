var t={stanza:null,finitura:null,email:null,telefono:null,nomecognome:null},n=document.getElementById("projForm"),o=document.getElementById("step-stanza"),i=null,a=[],l=[],c=null,r={},s=null;function d(){o.style.opacity<1&&(o.style.opacity=1),"none"===o.style.display&&_e(o),i&&(i.remove(),i=null,a=[],l=[]),s=document.querySelectorAll('input[type=radio][name="stanza"]');for(var e=0;e<s.length;e++)s[e].addEventListener("click",u,{once:!0,passive:!0})}function u(){for(var e=0;e<s.length;e++)s[e].removeEventListener("click",u,{once:!0,passive:!0});t.stanza=null!=c?c:this.value,s=null,i=document.createElement("div");var o=document.createElement("div"),a=document.createElement("div");a.classList.add("adv-line"),o.classList.add("adv-line-wrap"),i.classList.add("adv"),o.appendChild(a),i.appendChild(o),n.appendChild(i),"Cameretta"!==t.stanza?p():H()}var m=null;function p(){switch(t.stanza){case"Cucina":document.getElementById("img-fin-opaca").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b23ec3013aac2871039f2_cucina-opaca.jpg",document.getElementById("img-fin-lucida").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b23ebbd1846339ef6bd8b_cucina-materica.jpg",document.getElementById("img-fin-materica").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b23ebc015316c13cd990a_cucina-lucida.jpg",document.getElementById("img-fin-legno").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b23ea0d513222d30122fb_cucina-in-legno.jpg",document.getElementById("img-fin-vetro").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b23ea05ece0c55fe48f63_cucina-in-vetro.jpg",Fe(5);break;case"Soggiorno":document.getElementById("img-fin-opaca").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b3e9b6e20d20cf0c6df2d_soggiorno-opaco.jpg",document.getElementById("img-fin-lucida").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b3e9bb6171155ee04c1c0_soggiorno-lucido.jpg",document.getElementById("img-fin-materica").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b3e9bcad86ca1102409d0_soggiorno-materico.jpg",document.getElementById("img-fin-legno").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b4ff3a46f947bd8c754a9_soggiorno-legno.jpg",document.getElementById("img-fin-vetro").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b3e9bf275493f5d319349_soggiorno-vetro.jpg",Fe(6);break;case"Camera da letto":document.getElementById("img-fin-opaca").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b3ef91d6f54098a247893_camera-da-letto-opaca.jpg",document.getElementById("img-fin-lucida").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b3ef9e5cc111dd4cee193_camera-da-letto-lucida.jpg",document.getElementById("img-fin-materica").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b3ef93a64972f1748b130_camera-da-letto-materica.jpg",document.getElementById("img-fin-legno").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b3ef95464bfaf74954f9b_camera-da-letto-legno.jpg",document.getElementById("img-fin-vetro").src="https://uploads-ssl.webflow.com/5fb23671edd531731a88fddf/606b3efa4435a27b2b71187d_camera-da-letto-vetro.jpg",Fe(7)}_e(document.getElementById("step-finitura")),m=document.querySelectorAll('input[type=radio][name="finitura"]');for(var e=0;e<m.length;e++)m[e].addEventListener("click",v,{once:!0,passive:!0});document.querySelector("#step-finitura .hero-btn-back").addEventListener("click",f,{once:!0,passive:!0})}function v(){switch(t.finitura=this.value,$e(1,"Finitura "+this.value.toLowerCase()),m=null,t.stanza){case"Cucina":b();break;case"Soggiorno":k();break;case"Camera da letto":j()}}function f(){for(var e=0;e<m.length;e++)m[e].removeEventListener("click",v,{once:!0,passive:!0});this.removeEventListener("click",f,{once:!0,passive:!0}),m=null,d()}var g=null;function b(){_e(document.getElementById("step-tipologiaCucina")),g=document.querySelectorAll('input[type=radio][name="tipologiaCucina"]');for(var e=0;e<g.length;e++)g[e].addEventListener("click",y,{once:!0,passive:!0});document.querySelector("#step-tipologiaCucina .hero-btn-back").addEventListener("click",h,{once:!0,passive:!0})}function y(){t.tipologiaCucina=this.value,$e(2,this.value),g=null,ae(b)}function h(){for(var e=0;e<g.length;e++)g[e].removeEventListener("click",y,{once:!0,passive:!0});document.querySelector("#step-tipologiaCucina .hero-btn-back").removeEventListener("click",h,{once:!0,passive:!0}),g=null,p()}var E=null;function k(){_e(document.getElementById("step-tipologiaSoggiorno")),E=document.querySelectorAll('input[type=radio][name="tipologiaSoggiorno"]');for(var e=0;e<E.length;e++)E[e].addEventListener("click",L,{once:!0,passive:!0});document.querySelector("#step-tipologiaSoggiorno .hero-btn-back").addEventListener("click",S,{once:!0,passive:!0})}function L(){t.tipologiaSoggiorno=this.value,$e(2,this.value),E=null,document.querySelector("#step-tipologiaSoggiorno .hero-btn-back").removeEventListener("click",S,{once:!0,passive:!0}),w()}function S(){for(var e=0;e<E.length;e++)E[e].removeEventListener("click",L,{once:!0,passive:!0});document.querySelector("#step-tipologiaSoggiorno .hero-btn-back").removeEventListener("click",S,{once:!0,passive:!0}),E=null,p()}var B=null,I=null,q=null;function w(){_e(document.getElementById("step-elementiSoggiorno")),q=document.getElementById("hero-elementiSoggiorno-next"),I=document.querySelector("#step-elementiSoggiorno .hero-error-txt"),q.addEventListener("click",C,{passive:!0}),document.querySelector("#step-elementiSoggiorno .hero-btn-back:not(.next)").addEventListener("click",x,{once:!0,passive:!0})}function C(){if((B=document.querySelectorAll('input[name^="elSog"]:checked')).length<1)I.style.display="block";else{for(element of(t.elementiSoggiorno=[],B))t.elementiSoggiorno.push(element.getAttribute("name").replace("elSog-","").replaceAll("-"," "));$e(3,t.elementiSoggiorno.join(", ").substring(0,17)+"..."),B=null,I=null,document.querySelector("#step-elementiSoggiorno .hero-btn-back:not(.next)").removeEventListener("click",x,{once:!0,passive:!0}),q.removeEventListener("click",C,{passive:!0}),q=null,ae(w)}}function x(){B=null,I=null,q.removeEventListener("click",C,{passive:!0}),q=null,k()}var A=null;function j(){_e(document.getElementById("step-tipologiaArmadio")),A=document.querySelectorAll('input[type=radio][name="tipologiaArmadio"]');for(var e=0;e<A.length;e++)A[e].addEventListener("click",z,{once:!0,passive:!0});document.querySelector("#step-tipologiaArmadio .hero-btn-back").addEventListener("click",_,{once:!0,passive:!0})}function z(){t.tipologiaArmadio=this.value;var e=null;switch(this.value){case"Cabina":e=this.value+" armadio";break;case"Angolo":e="Armadio ad "+this.value.toLowerCase();break;default:e="Armadio "+this.value.toLowerCase()}$e(2,"Cabina"===this.value?this.value+" armadio":e),A=null,document.querySelector("#step-tipologiaArmadio .hero-btn-back").removeEventListener("click",_,{once:!0,passive:!0}),F()}function _(){for(var e=0;e<A.length;e++)A[e].removeEventListener("click",z,{once:!0,passive:!0});document.querySelector("#step-tipologiaArmadio .hero-btn-back").removeEventListener("click",_,{once:!0,passive:!0}),A=null,p()}var D=null;function F(){_e(document.getElementById("step-tipologiaLetto")),D=document.querySelectorAll('input[type=radio][name="tipologiaLetto"]');for(var e=0;e<D.length;e++)D[e].addEventListener("click",$,{once:!0,passive:!0});document.querySelector("#step-tipologiaLetto .hero-btn-back").addEventListener("click",K,{once:!0,passive:!0})}function $(){t.tipologiaLetto=this.value,D=null,$e(3,"Legno"===this.value?"Letto in legno":"Letto imbottito"),document.querySelector("#step-tipologiaLetto .hero-btn-back").removeEventListener("click",K,{once:!0,passive:!0}),G()}function K(){for(var e=0;e<D.length;e++)D[e].removeEventListener("click",$,{once:!0,passive:!0});document.querySelector("#step-tipologiaLetto .hero-btn-back").removeEventListener("click",K,{once:!0,passive:!0}),D=null,j()}var T=null;function G(){_e(document.getElementById("step-boxcontenitore")),T=document.querySelectorAll('input[type=radio][name="boxContenitore"]');for(var e=0;e<T.length;e++)T[e].addEventListener("click",J,{once:!0,passive:!0});document.querySelector("#step-boxcontenitore .hero-btn-back").addEventListener("click",X,{once:!0,passive:!0})}function J(){t.boxContenitore="true"===this.value,T=null,$e(4,this.value?"Letto senza box":"Letto con box"),document.querySelector("#step-boxcontenitore .hero-btn-back").removeEventListener("click",X,{once:!0,passive:!0}),ae(G)}function X(){for(var e=0;e<T.length;e++)T[e].removeEventListener("click",J,{once:!0,passive:!0});document.querySelector("#step-boxcontenitore .hero-btn-back").removeEventListener("click",X,{once:!0,passive:!0}),T=null,F()}var Y=null,Z=null;function H(){_e(document.getElementById("step-qtaBambini")),Fe(6),(Y=document.getElementById("hero-qtaBambini-next")).addEventListener("click",M,{passive:!0}),Z=document.querySelector("#step-qtaBambini .hero-error-txt"),document.querySelector("#step-qtaBambini .hero-btn-back:not(.next)").addEventListener("click",N,{once:!0,passive:!0})}function M(){document.getElementById("qtaBambini").value<1?Z.style.display="block":(t.qtaBambini=document.getElementById("qtaBambini").value,$e(1,"x"+t.qtaBambini),document.querySelector("#step-qtaBambini .hero-btn-back:not(.next)").removeEventListener("click",N,{once:!0,passive:!0}),Y.removeEventListener("click",M,{passive:!0}),Y=null,Z=null,P())}function N(){Y.removeEventListener("click",M,{passive:!0}),Y=null,Z=null,d()}var O=null;function P(){_e(document.getElementById("step-genBambini")),O=document.querySelectorAll('input[type=radio][name="genBambini"]');for(var e=0;e<O.length;e++)O[e].addEventListener("click",Q,{once:!0,passive:!0});document.querySelector("#step-genBambini .hero-btn-back").addEventListener("click",R,{once:!0,passive:!0})}function Q(){t.genBambini=this.value,$e(2,this.value),O=null,document.querySelector("#step-genBambini .hero-btn-back").removeEventListener("click",R,{once:!0,passive:!0}),ee()}function R(){for(var e=0;e<O.length;e++)O[e].removeEventListener("click",Q,{once:!0,passive:!0});O=null,H()}var U=null,V=null,W=null;function ee(){_e(document.getElementById("step-elementiCameretta")),W=document.getElementById("hero-elementiCameretta-next"),V=document.querySelector("#step-elementiCameretta .hero-error-txt"),W.addEventListener("click",te,{passive:!0}),document.querySelector("#step-elementiCameretta .hero-btn-back:not(.next)").addEventListener("click",ne,{once:!0,passive:!0})}function te(){if((U=document.querySelectorAll('input[name^="elCam"]:checked')).length<1)V.style.display="block";else{for(element of(t.elementiCameretta=[],U))t.elementiCameretta.push(element.getAttribute("name").replace("elCam-","").replaceAll("-"," "));$e(3,t.elementiCameretta.join(", ").substring(0,17)+"..."),U=null,V=null,document.querySelector("#step-elementiCameretta .hero-btn-back:not(.next)").removeEventListener("click",ne,{once:!0,passive:!0}),W.removeEventListener("click",te,{passive:!0}),W=null,ae(ee)}}function ne(){U=null,V=null,W.removeEventListener("click",te,{passive:!0}),W=null,P()}var oe=null,ie=null;function ae(e){(null===ie||e)&&(ie=e),_e(document.getElementById("step-fotomisure")),(oe=document.getElementById("hero-fotomisure-next")).addEventListener("click",le,{once:!0,passive:!0}),document.querySelector("#step-fotomisure .hero-btn-back:not(.next)").addEventListener("click",ce,{once:!0,passive:!0})}function le(){var e=null;e=document.getElementById("fotomisure-input").files[0]?document.getElementById("fotomisure-input").files[0].name.substring(0,17)+"...":"Foto misure",$e(De-2,e),se()}function ce(){oe.removeEventListener("click",le,{once:!0,passive:!0}),document.querySelector("#step-fotomisure .hero-btn-back:not(.next)").removeEventListener("click",ce,{once:!0,passive:!0}),oe=null,ie()}var re=null;function se(){_e(document.getElementById("step-fotostanza")),(re=document.getElementById("hero-fotostanza-next")).addEventListener("click",de,{once:!0,passive:!0}),document.querySelector("#step-fotostanza .hero-btn-back:not(.next)").addEventListener("click",ue,{once:!0,passive:!0})}function de(){var e=null;e=document.getElementById("fotostanza-input").files[0]?document.getElementById("fotostanza-input").files[0].name.substring(0,17)+"...":"Foto stanza",$e(De-1,e),pe()}function ue(){re.removeEventListener("click",de,{once:!0,passive:!0}),document.querySelector("#step-fotostanza .hero-btn-back:not(.next)").removeEventListener("click",ue,{once:!0,passive:!0}),re=null,ae()}var me=null;function pe(){_e(document.getElementById("step-altreinfo")),(me=document.getElementById("hero-altreinfo-next")).addEventListener("click",ve,{once:!0,passive:!0}),document.querySelector("#step-altreinfo .hero-btn-back:not(.next)").addEventListener("click",fe,{once:!0,passive:!0})}function ve(){t.altreinfo=document.getElementById("txtarea-altreinfo").value,me=null,_e(document.getElementById("step-contacts")),document.getElementById("hero-send-btn"),document.querySelector("#step-contacts .hero-btn-back").addEventListener("click",je,{once:!0,passive:!0}),ge=document.getElementById("hero-email"),be=document.getElementById("hero-telefono"),Ee=document.getElementById("hero-nome"),ge.addEventListener("input",Ie,{passive:!0}),ge.addEventListener("focusout",qe,{passive:!0}),be.addEventListener("input",we,{passive:!0}),be.addEventListener("focusout",Ce,{passive:!0}),Ee.addEventListener("input",xe,{passive:!0}),Ee.addEventListener("focusout",Ae,{passive:!0}),ye=document.getElementById("hero-email-error"),he=document.getElementById("hero-telefono-error"),ke=document.getElementById("hero-nome-error")}function fe(){me.removeEventListener("click",ve,{once:!0,passive:!0}),document.querySelector("#step-altreinfo .hero-btn-back:not(.next)").removeEventListener("click",me,{once:!0,passive:!0}),me=null,se()}var ge=null,be=null,ye=null,he=null,Ee=null,ke=null,Le=!1,Se=!1,Be=!1;function Ie(){if(!Le)return;/^\S+@\S+$/.test(ge.value)?ye.style.display="none":ye.style.display="block"}function qe(){Le||(Le=!0),Ie()}function we(){if(!Se)return;const e=/^(\+?\+\d{1,4})?\+{0}\d{10}$/;""!==!be.value&&be.value.length>0&&Be?e.test(be.value.replaceAll(" ",""))?he.style.display="none":he.style.display="block":he.style.display="none",Be=!1}function Ce(){Se||(Se=!0),Be=!0,we()}function xe(){""!==Ee.value&&(ke.style.display="none")}function Ae(){""===Ee.value?ke.style.display="block":ke.style.display="none"}function je(){document.querySelector("#step-contacts .hero-btn-back").addEventListener("click",je,{once:!0,passive:!0}),null,pe()}var ze=function(){firebase.initializeApp({apiKey:"AIzaSyASFwxuCjcGeise9F5JSKwZSKoAYC8SiXA",authDomain:"rb-prjf.firebaseapp.com",projectId:"rb-prjf",storageBucket:"rb-prjf.appspot.com",messagingSenderId:"454602980083",appId:"1:454602980083:web:8ea1d1d3e4dd76a7cc5586"});var e=firebase.storage().ref(),t=document.getElementById("fotomisure-input").files[0],n=document.getElementById("fotostanza-input").files[0],o=null,a=null,l=null,c=null,s=!1,d=!1;t?(o=Date.now()+"-"+r.email+document.getElementById("fotomisure-input").value.split(/(\\|\/)/g).pop().match(/\.[0-9a-z]{3,5}$/i)[0],l=e.child("foto-misure/"+r.route+"/"+o),r.fotomisure="foto-misure/"+r.route+"/"+o,l.put(t).then(e=>{s=!0})):s=!0,n?(a=Date.now()+"-"+r.email+document.getElementById("fotostanza-input").value.split(/(\\|\/)/g).pop().match(/\.[0-9a-z]{3,5}$/i)[0],c=e.child("foto-stanze/"+r.route+"/"+a),r.fotostanza="foto-stanze/"+r.route+"/"+a,c.put(n).then(e=>{d=!0})):d=!0,firebase.firestore().collection(r.route).add(r).then(()=>{if(s&&d)i.remove(),_e(document.getElementById("hero-success"));else var e=setInterval(()=>{s&&d&&(i.remove(),_e(document.getElementById("hero-success")),clearInterval(e))},200)}).catch(e=>{console.error("error: ",e)})};function _e(t){for(e of document.querySelectorAll(".hero-step"))e.style.display="none";t.style.display="block"}document.getElementById("hero-send-btn").addEventListener("click",function(e){if(e.preventDefault(),/^\S+@\S+$/.test(ge.value)?!(""!==!be.value&&be.value.length>0&&!/^(\+?\+\d{1,4})?\+{0}\d{10}$/.test(be.value.replaceAll(" ",""))||(""===Ee.value?(Ae(),1):(t.email=ge.value,t.telefono=""===be.value?"":be.value,t.nomecognome=Ee.value,0))):(qe(),Ae(),0)){switch(document.getElementById("hero-send-btn").value="Invio in corso...",t.stanza){case"Cucina":r.route="cucine",r.stanza="Cucina",r.finitura=t.finitura,r.tipologiaCucina=t.tipologiaCucina;break;case"Soggiorno":r.route="soggiorni",r.stanza="Soggiorno",r.finitura=t.finitura,r.tipologiaSoggiorno=t.tipologiaSoggiorno,r.elementiSoggiorno=t.elementiSoggiorno;break;case"Camera da letto":r.route="cameredaletto",r.stanza="Camera da letto",r.finitura=t.finitura,r.tipologiaArmadio=t.tipologiaArmadio,r.tipologiaLetto=t.tipologiaLetto,r.boxcontenitore=t.boxContenitore;break;case"Cameretta":r.route="camerette",r.stanza="Cameretta",r.qtaBambini=t.qtaBambini,r.genBambini=t.genBambini,r.elementiCameretta=t.elementiCameretta}var n,o,i,a,l;r.altreinfo=t.altreinfo,r.email=t.email.replace(/\s/g,""),r.telefono=t.telefono,r.nome=t.nomecognome,n="https://www.gstatic.com/firebasejs/8.6.3/firebase-app.js",o="https://www.gstatic.com/firebasejs/8.6.3/firebase-storage.js",i="https://www.gstatic.com/firebasejs/8.6.3/firebase-firestore.js",a=ze,(l=document.createElement("script")).type="text/javascript",l.src=n,l.onload=(()=>{var e=document.createElement("script");e.type="text/javascript",e.src=o,e.onload=(()=>{var e=document.createElement("script");e.type="text/javascript",e.src=i,e.onload=a,document.head.appendChild(e)}),document.head.appendChild(e)}),document.head.appendChild(l)}},{passive:!1}),d();var De=0;function Fe(e){var n=null;if(De=e,0===a.length){for(var o=0;o<e;o++)(n=document.createElement("div")).classList.add("adv-dot"),advDotLbl=document.createElement("div"),advDotLbl.classList.add("adv-dot-lbl"),i.appendChild(n),n.appendChild(advDotLbl),l.push(advDotLbl),a.push(n);a[0].style.background="#8ce489",l[0].innerText=t.stanza}}function $e(e,t){l[e].innerText=t,a[e].style.background="#8ce489"}